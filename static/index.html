<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>YouTube Pattern Benchmark</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/style.css">
</head>

<body>

  <header>
    <div class="container header-content">
      <a href="/" class="logo">
        <div class="logo-icon">V</div>
        <span>YouTube Pattern Benchmark</span>
      </a>
      <div class="flex-row">
        <button id="adminKeyBtn" class="ghost" style="font-size:1.2rem;" title="관리자 키 입력">🔑</button>
        <button id="themeToggle" class="ghost" style="font-size:1.2rem;">🌙</button>
      </div>
    </div>
  </header>

  <!-- Main Selection Section -->
  <section class="selection-section">
    <div class="container">
      <div class="selection-header">
        <h1 class="selection-title">잘 되는 영상 구조로<br>내 스크립트 만들기</h1>
        <p class="selection-subtitle">조회수 터진 영상의 구조를 분석해서, 내 주제로 대본을 만들어요</p>
      </div>

      <div class="selection-cards">
        <!-- Card 1: URL 분석 -->
        <div class="selection-card" id="selectUrlAnalysis">
          <div class="card-icon">🎯</div>
          <h3 class="card-title">이 영상처럼 만들래요</h3>
          <p class="card-desc">YouTube URL 붙여넣기</p>
          <p class="card-detail">좋아하는 영상 URL만 넣으면 같은 구조로 내 대본 완성</p>
        </div>

        <!-- Card 2: 빠른 시작 -->
        <div class="selection-card" id="selectQuickStart">
          <div class="card-icon">⚡</div>
          <h3 class="card-title">영상 없이 바로 시작</h3>
          <p class="card-desc">검증된 구조 선택</p>
          <p class="card-detail">URL 없어도 OK. 인기 구조 골라서 바로 대본 생성</p>
        </div>

        <!-- Card 3: 영상 탐색 -->
        <div class="selection-card" id="selectExplore">
          <div class="card-icon">🔥</div>
          <h3 class="card-title">인기 영상 둘러보기</h3>
          <p class="card-desc">최근 7일 급상승</p>
          <p class="card-detail">조회수 터진 영상들 구경하고 마음에 드는 구조 가져가기</p>
        </div>
      </div>

      <p class="selection-hint">무료로 바로 체험해보세요 (1일 1회)</p>
    </div>
  </section>

  <main class="container main-grid hidden" id="mainWorkspace">

      <!-- Back to Selection -->
      <div class="back-to-selection">
        <button id="backToSelectionBtn" class="ghost">
          <span>←</span> 다른 방법으로 시작하기
        </button>
      </div>

      <!-- Step 1: Analyze -->
      <div class="panel step-panel grid-step1">
        <div class="step-header">
          <span class="step-badge">STEP 01</span>
          <span class="step-status" id="step1Status"></span>
        </div>
        <h3 class="step-title">🎬 영상 구조 분석</h3>
        <p class="step-desc">벤치마킹할 유튜브 영상 URL을 입력하세요.</p>

        <div class="form-group mt-4">
          <label>YouTube URL</label>
          <input type="text" id="urlInput" placeholder="https://www.youtube.com/watch?v=..." />
        </div>

        <!-- 썸네일 미리보기 -->
        <div id="videoPreview" class="video-preview hidden">
          <img id="videoThumbnail" src="" alt="Video Thumbnail" />
          <div class="video-preview-info">
            <span class="video-preview-badge">📺 분석할 영상</span>
            <button id="clearUrl" class="ghost btn-small" title="URL 지우기">✕</button>
          </div>
        </div>

        <button id="analyzeBtn" class="primary w-full btn-large">
          <span class="btn-icon">🔍</span>
          패턴 분석 시작
        </button>

        <!-- Loading Progress -->
        <div id="analyzeProgress" class="progress-container hidden">
          <div class="progress-step completed" data-step="1">
            <span class="progress-icon">✓</span>
            <span class="progress-text">영상 정보 가져오기</span>
          </div>
          <div class="progress-step" data-step="2">
            <span class="progress-icon">2</span>
            <span class="progress-text">자막 추출</span>
          </div>
          <div class="progress-step" data-step="3">
            <span class="progress-icon">3</span>
            <span class="progress-text">AI 구조 분석</span>
          </div>
          <div class="progress-step" data-step="4">
            <span class="progress-icon">4</span>
            <span class="progress-text">바이럴 점수 계산</span>
          </div>
        </div>
      </div>

      <!-- Step 2: Generate -->
      <div class="panel step-panel grid-step2" id="step2Panel">
        <div class="step-header">
          <span class="step-badge secondary">STEP 02</span>
          <span class="step-status" id="step2Status">Step 1을 먼저 완료하세요</span>
        </div>
        <h3 class="step-title">✍️ 스크립트 생성</h3>

        <div class="form-group mt-4">
          <label>주제 / 아이템</label>
          <input type="text" id="topic" placeholder="예) AI 영어코칭, 다이어트 식단" />
        </div>

        <div class="flex-row">
          <div class="w-full">
            <label>톤앤매너</label>
            <select id="tone">
              <option value="default">기본 (중립)</option>
              <option value="humor">유머러스</option>
              <option value="serious">진지/신뢰</option>
              <option value="emotional">감동/공감</option>
              <option value="sharp">팩트폭격</option>
            </select>
          </div>
          <div class="w-full">
            <label>스타일</label>
            <select id="style">
              <option value="default">기본</option>
              <option value="storytelling">스토리텔링</option>
              <option value="informative">정보전달</option>
              <option value="review">후기/리뷰</option>
            </select>
          </div>
        </div>

        <div class="form-group mt-4">
          <label>타겟 시청자 (선택)</label>
          <input type="text" id="audience" placeholder="예) 2030 직장인, 주부" />
        </div>

        <button id="generate" class="primary w-full btn-large" disabled>
          <span class="btn-icon">✨</span>
          스크립트 생성
        </button>
      </div>

      <!-- Analysis Result -->
      <div class="panel result-panel grid-analysis">
        <div class="panel-header">
          <h3>📊 분석 리포트</h3>
        </div>

        <!-- Score Section -->
        <div class="score-section">
          <div class="score-gauge-container">
            <svg class="score-gauge" viewBox="0 0 120 120">
              <circle class="gauge-bg" cx="60" cy="60" r="54" />
              <circle class="gauge-fill" id="scoreGauge" cx="60" cy="60" r="54" />
            </svg>
            <div class="score-value-container">
              <span class="score-value" id="scoreValue">-</span>
              <span class="score-label">Viral Score</span>
              <span class="score-grade" id="scoreGrade">-</span>
            </div>
          </div>

          <div class="score-breakdown">
            <div class="breakdown-item">
              <div class="breakdown-header">
                <span>🎣 훅 강도</span>
                <span class="breakdown-value" id="hookScore">-</span>
              </div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="hookBar" style="width: 0%"></div>
              </div>
            </div>
            <div class="breakdown-item">
              <div class="breakdown-header">
                <span>🔄 흐름 일관성</span>
                <span class="breakdown-value" id="flowScore">-</span>
              </div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="flowBar" style="width: 0%"></div>
              </div>
            </div>
            <div class="breakdown-item">
              <div class="breakdown-header">
                <span>💡 심리 트리거</span>
                <span class="breakdown-value" id="triggerScore">-</span>
              </div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="triggerBar" style="width: 0%"></div>
              </div>
            </div>
            <div class="breakdown-item">
              <div class="breakdown-header">
                <span>📢 CTA 명확성</span>
                <span class="breakdown-value" id="ctaScore">-</span>
              </div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="ctaBar" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="insight-box" id="insightBox">
          <span class="insight-icon">💡</span>
          <p id="scoreReason">영상을 분석하면 AI 인사이트가 여기에 표시됩니다.</p>
        </div>

        <div class="divider"></div>

        <div class="summary-section">
          <div class="summary-item">
            <label>📝 핵심 요약</label>
            <p id="summary" class="summary-text">-</p>
          </div>
          <div class="summary-item">
            <label>🏷️ 키워드</label>
            <div id="keywords" class="keywords-container">-</div>
          </div>
        </div>
      </div>

      <!-- Timeline Pattern -->
      <div class="panel result-panel grid-timeline">
        <div class="panel-header">
          <h3>🎬 패턴 타임라인</h3>
          <button id="resetPattern" class="btn-small secondary">↺ 초기화</button>
        </div>

        <!-- Visual Timeline Bar -->
        <div class="timeline-visual" id="timelineVisual">
          <div class="timeline-bar-container">
            <div class="timeline-bar" id="timelineBar">
              <!-- Segments will be added dynamically -->
            </div>
          </div>
        </div>

        <div id="timeline" class="timeline-container">
          <div class="empty-state">
            <span class="empty-icon">📹</span>
            <p>영상을 분석하면 구조가 여기에 표시됩니다.</p>
          </div>
        </div>
      </div>

      <!-- Script Output -->
      <div class="panel result-panel grid-script">
        <div class="panel-header">
          <h3>✍️ 생성된 스크립트</h3>
        </div>

        <div class="script-tabs-container">
          <div class="script-tabs" id="scriptTabs">
            <!-- Tabs will go here -->
          </div>
          <button id="newVersionBtn" class="btn-small ghost hidden">+ 새 버전</button>
        </div>

        <div id="scriptContent" class="script-content">
          <div class="empty-state">
            <span class="empty-icon">✨</span>
            <p>스크립트가 생성되면 여기에 표시됩니다.</p>
          </div>
        </div>

        <div id="scriptBox" class="script-box hidden" contenteditable="true"></div>

        <div class="script-actions hidden" id="scriptActions">
          <button id="copyScript" class="secondary">
            <span>📋</span> 복사
          </button>
          <button id="downloadScript" class="secondary">
            <span>⬇️</span> 다운로드
          </button>
          <button id="regenerateScript" class="ghost">
            <span>🔄</span> 다시 생성
          </button>
        </div>
      </div>

  </main>

  <!-- Template Workspace (바로 시작) -->
  <main class="container template-workspace hidden" id="templateWorkspace">
    <div class="back-to-selection">
      <button id="backFromTemplate" class="ghost">
        <span>←</span> 다른 방법으로 시작하기
      </button>
    </div>

    <div class="template-page-header">
      <h2>⚡ 바로 시작</h2>
      <p>검증된 바이럴 구조 템플릿으로 스크립트를 생성해요</p>
    </div>

    <!-- Step 1: Category -->
    <div id="templateStep1" class="template-step">
      <h3 class="step-label">1. 카테고리 선택</h3>
      <div class="category-grid-page" id="categoryGridPage"></div>
    </div>

    <!-- Step 2: Template -->
    <div id="templateStep2" class="template-step hidden">
      <button class="ghost back-btn-inline" onclick="backToCategoriesPage()">← 카테고리 다시 선택</button>
      <h3 class="step-label">2. 구조 선택</h3>
      <div class="template-grid-page" id="templateGridPage"></div>
    </div>

    <!-- Step 3: Topic Input + Generate -->
    <div id="templateStep3" class="template-step hidden">
      <button class="ghost back-btn-inline" onclick="backToTemplatesPage()">← 구조 다시 선택</button>
      <div class="selected-badges">
        <span class="badge-category" id="selectedCategoryBadge"></span>
        <span class="badge-template" id="selectedTemplateBadge"></span>
      </div>
      <h3 class="step-label">3. 주제 입력</h3>
      <div class="topic-input-section">
        <input type="text" id="templateTopic" class="topic-input-large" placeholder="예) 아침 공복에 물 마시기, 주식 초보 시작법" />
        <button id="generateFromTemplatePage" class="primary btn-large btn-generate">
          <span class="btn-icon">✨</span>
          스크립트 생성
        </button>
      </div>
    </div>

    <!-- Script Result -->
    <div id="templateResult" class="template-result hidden">
      <div class="panel result-panel">
        <div class="panel-header">
          <h3>✍️ 생성된 스크립트</h3>
        </div>
        <div id="templateScriptBox" class="script-box" contenteditable="true"></div>
        <div class="script-actions">
          <button id="copyTemplateScript" class="secondary">
            <span>📋</span> 복사
          </button>
          <button id="downloadTemplateScript" class="secondary">
            <span>⬇️</span> 다운로드
          </button>
          <button id="regenerateTemplateScript" class="ghost">
            <span>🔄</span> 다시 생성
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- Explore Workspace (인기 영상 탐색) -->
  <main class="container explore-workspace hidden" id="exploreWorkspace">
    <div class="back-to-selection">
      <button id="backFromExplore" class="ghost">
        <span>←</span> 다른 방법으로 시작하기
      </button>
    </div>

    <div class="explore-page-header">
      <h2>🔥 인기 영상 탐색</h2>
      <p>최근 7일 급상승 영상들을 카테고리별로 둘러보세요</p>
    </div>

    <!-- Step 1: Category Selection -->
    <div id="exploreStep1" class="explore-step">
      <h3 class="step-label">카테고리 선택</h3>
      <div class="category-grid-page" id="exploreCategoryGrid"></div>
    </div>

    <!-- Step 2: Video List -->
    <div id="exploreStep2" class="explore-step hidden">
      <div class="explore-step2-header">
        <button class="back-btn-prominent" onclick="backToExploreCategoriesPage()">
          ← 카테고리 다시 선택
        </button>
        <div class="explore-category-header">
          <span class="explore-category-badge" id="exploreCategoryBadge"></span>
          <span class="explore-video-count" id="exploreVideoCount">영상 10개</span>
        </div>
      </div>
      <div class="video-grid" id="exploreVideoGrid">
        <!-- 영상 카드들이 여기에 렌더링됨 -->
        <div class="loading-state">
          <div class="loading-spinner-large"></div>
          <p>인기 영상을 불러오는 중...</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Admin Key Modal -->
  <div id="adminKeyModal" class="modal-overlay">
    <div class="modal" style="max-width: 360px;">
      <div class="modal-header">
        <h3>🔑 관리자 키 입력</h3>
        <button class="ghost" onclick="closeAdminKeyModal()">✕</button>
      </div>
      <div class="input-group">
        <label>무제한 사용 키</label>
        <input type="password" id="adminKeyInput" placeholder="키를 입력하세요">
      </div>
      <div class="flex-row" style="justify-content:flex-end; margin-top:1rem; gap:0.5rem;">
        <button class="ghost" onclick="closeAdminKeyModal()">취소</button>
        <button id="activateAdminBtn" class="primary">활성화</button>
      </div>
      <p id="adminKeyStatus" style="margin-top:0.75rem; font-size:0.85rem; color:var(--text-muted);"></p>
    </div>
  </div>

  <!-- Edit Pattern Modal -->
  <div id="editPatternModal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h3>✏️ 패턴 수정</h3>
        <button id="closeEditPattern" class="ghost" onclick="closeEditPatternModal()">✕</button>
      </div>
      <div class="input-group">
        <label>패턴 설명 (Formula)</label>
        <textarea id="editFormula" rows="3"></textarea>
      </div>
      <div class="input-group">
        <label>의도 태그 (Intent)</label>
        <input type="text" id="editIntent" placeholder="콤마(,)로 구분">
      </div>
      <div class="flex-row" style="justify-content:flex-end; margin-top:1rem;">
        <button id="savePatternBtn" class="primary">수정 완료</button>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay hidden">
    <div class="loading-content">
      <div class="loading-spinner-large"></div>
      <p class="loading-title" id="loadingTitle">영상 분석 중...</p>
      <p class="loading-subtitle" id="loadingSubtitle">영상 구조를 파악하고 있어요</p>
      <div class="loading-tips hidden" id="loadingTips">
        <span class="loading-tip-icon">💡</span>
        <p id="loadingTipText">서버가 바빠요. 조금만 기다려 주세요~</p>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast">
    <span id="toastMsg">알림 메시지</span>
    <button id="toastAction" class="ghost" style="color:var(--accent); margin-left:auto; display:none;">Action</button>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <span class="footer-logo">Reels Code</span>
          <p class="footer-desc">AI 기반 유튜브 바이럴 패턴 분석 도구</p>
        </div>
        <div class="footer-links">
          <a href="https://www.threads.net/@reelscode" target="_blank" rel="noopener noreferrer">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.59 12c.025 3.086.718 5.496 2.057 7.164 1.432 1.781 3.632 2.695 6.54 2.717 1.986-.013 3.758-.474 5.146-1.473 1.324-.954 2.19-2.323 2.575-4.073.172-.783.254-1.55.254-2.335 0-.795-.073-1.486-.22-2.054-.37-1.424-1.286-2.213-2.58-2.213-.93 0-1.664.394-2.07 1.034l-.072.114c-.1.168-.183.346-.25.532.09-.03.18-.056.273-.079.61-.148 1.266-.124 1.84.162.756.378 1.254 1.103 1.43 2.06.18.97.06 1.88-.36 2.63-.42.74-1.1 1.3-1.94 1.6-.49.17-1.02.26-1.57.26h-.03c-1.13-.01-2.14-.47-2.9-1.32-.74-.82-1.16-1.92-1.2-3.15-.03-.94.15-1.86.53-2.7.38-.86.95-1.6 1.68-2.17 1.21-.95 2.69-1.43 4.36-1.43 2.61 0 4.63 1.14 5.68 3.22.46.91.77 1.98.9 3.2.12 1.03.12 2.1-.03 3.15-.28 1.98-1.14 3.82-2.5 5.23-1.92 1.99-4.67 3.06-7.88 3.06h-.01zm-.09-5.12c.58 0 1.12-.13 1.58-.38.59-.32.98-.82 1.12-1.44.14-.6.06-1.22-.22-1.8-.28-.56-.74-.95-1.33-1.14-.33-.1-.68-.1-1.01 0-.54.17-.97.52-1.26 1.01-.38.66-.54 1.57-.35 2.47.15.76.52 1.28 1.47 1.28z"/>
            </svg>
            Threads
          </a>
        </div>
      </div>
      <div class="footer-bottom">
        <p class="copyright">© 2025 Reels Code. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- 플로팅 카카오톡 문의 버튼 -->
  <a href="https://litt.ly/reels_code_official/sale/XdbLaGW" target="_blank" rel="noopener noreferrer" class="floating-btn" title="평생 소장 문의">
    <span class="floating-btn-text">평생 소장 문의</span>
    <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28">
      <path d="M12 3C6.48 3 2 6.58 2 11c0 2.83 1.82 5.31 4.56 6.72-.14.52-.91 3.36-.94 3.58 0 0-.02.17.09.24.1.06.23.03.23.03.31-.04 3.6-2.35 4.17-2.75.62.09 1.25.13 1.89.13 5.52 0 10-3.58 10-8s-4.48-8-10-8z"/>
    </svg>
  </a>

<style>    .floating-btn {      position: fixed;      bottom: 24px;      right: 24px;      height: 52px;      padding: 0 20px 0 16px;      background: #FEE500;      border-radius: 26px;      display: flex;      align-items: center;      justify-content: center;      gap: 10px;      color: #3C1E1E;      box-shadow: 0 4px 16px rgba(0,0,0,0.3);      z-index: 9999;      transition: transform 0.2s, box-shadow 0.2s;      text-decoration: none;      animation: pulse 2s infinite;    }    .floating-btn-text {      font-size: 15px;      font-weight: 700;      white-space: nowrap;    }    .floating-btn:hover {      transform: scale(1.05);      box-shadow: 0 6px 24px rgba(0,0,0,0.4);      animation: none;    }    @keyframes pulse {      0%, 100% {        box-shadow: 0 4px 16px rgba(0,0,0,0.3);      }      50% {        box-shadow: 0 4px 24px rgba(254, 229, 0, 0.6), 0 0 0 10px rgba(254, 229, 0, 0.15);      }    }  </style>

  <script src="/static/script.js"></script>
</body>

</html>
